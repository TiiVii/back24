import{f as y}from"./fetch-DFxpFdnl.js";const m=document.querySelector(".activelogout"),p=function(e){e.preventDefault(),window.location.href="index.html"};m.addEventListener("click",p);document.addEventListener("DOMContentLoaded",g);async function g(){const e="https://teevee.swedencentral.cloudapp.azure.com/api/auth/me",n={method:"GET",headers:{Authorization:"Bearer "+localStorage.getItem("token")}};y(e,n).then(o=>{console.log(o),console.log(o.user.username),document.getElementById("username").innerHTML=o.user.username})}const E=document.querySelector(".past"),f=function(e){e.preventDefault(),window.location.href="entries.html"};E.addEventListener("click",f);const c=document.querySelector(".createEntry");c.addEventListener("click",async e=>{if(e.preventDefault(),console.log("Lets create a new diary entry"),document.querySelector(".entry_form"),c.checkValidity())h();else{c.reportValidity();return}});async function h(){const e=localStorage.getItem("user_id"),t=document.getElementById("entry_date").value,n=document.getElementById("mood").value,o=document.getElementById("crying").value,d=document.getElementById("breakdowns").value,u=document.getElementById("notes").value,a=localStorage.getItem("token");if(!a){console.error("Token not found in local storage");return}const l={user_id:e,entry_date:t,mood:n,crying:o,breakdowns:d,notes:u};console.log(l);const i={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+a},body:JSON.stringify(l)};v(i)}async function v(e){k("https://teevee.swedencentral.cloudapp.azure.com/api/entries",e).then(t=>{console.log("Response data:",t)}).catch(t=>{console.error("Error:",t)})}async function k(e,t={}){const n=await fetch(e,t);return console.log(n),n.json()}const r=document.getElementById("popup"),s=document.getElementById("overlay"),w=document.querySelector(".new"),B=document.getElementById("closePopup"),I=document.querySelector(".createEntry");w.addEventListener("click",function(e){e.preventDefault(),r.style.display="block",s.style.display="block"});B.addEventListener("click",function(){r.style.display="none",s.style.display="none"});I.addEventListener("click",function(e){e.preventDefault(),r.style.display="none",s.style.display="none"});
